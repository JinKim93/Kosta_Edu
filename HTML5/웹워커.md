## 웹 워커
- 자바스크립트 코드를 백그라운드에서 실행시기기 위한 기술
- 기존 웹표준에서는 멀티스레드가 지원되지 않음
- 멀리스레드란 여러 작업을 동시에 수행하는 것을 뜻함
- 웹워커가 멀티스레드 역할을 한다. -> 별개의 백그라운드 처리가 가능

## 웹 워커의 생성 및 사용법
- 워커의 생성 방법 - HTML 페이지 안에서 Worker라는 객체를 통해 생성
- new 연산자를 통해 객체 생성, 전달인자로 worker.js를 넘겨주어야 함
 
```html
var worker = new Worker("worker.js");
```

### 워커 객체를 통해 제공되는 메소드와 이벤트
![image](https://user-images.githubusercontent.com/82345970/167326111-49013c0f-a00e-4b90-b3dd-804753616f67.png)


### postMessage() 메소드
![image](https://user-images.githubusercontent.com/82345970/167326120-4cfa062d-eb96-4881-a429-3a0aec4d553c.png)

### onmessqge 이벤트
```html
onmessage = function(event)
{
  event.data;
  postMessage(메시지);
}
```

- postMessage() 메소드에 의해 전달된 메시지를 event로 받는다
- postMessage()를 통해 메시지를 전달한 곳으로 다시 메시지 전달 가능


### 워커의 동작구조
- HTML5 메인 문서와 웹워커 사이에 postMessage() 메소드를 통해서 서로 양방향 메시지를 주고 받을 수 있다

![image](https://user-images.githubusercontent.com/82345970/167330517-559b625a-de00-4787-9287-772f6a9e1a49.png)


## 웹 워커 API사용
### 웹 워커 미적용 코드 실습 시나리오
- 웹워커를 적용하지 않는 코드
- 수행 시간은 5초로 하는 워커 미적용 수행 버튼 생성
- 또 하나의 버튼 '깨어날시간' 생성
- '워커 미적용 수행' 버튼 클릭 시 5초간 다른 곳으로 포커시 이동 불가
- 5초간 반복을 계속하는 것이다. -> 자원을 독점하는 시간


### 웹 워커 미적용 코드 실습
```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
    </head>
    <body>           
        <script type = "text/javascript">
            function Available()
            {
                if(window.Worker)
                {
                    document.getElementById("result").innerHTML = "이 브라우저는 웹 워커를 지원합니다";
                }
                else
                {
                    document.getElementById("result").innerHTML = "이 브라우저는 웹 워커를 지원하지 않습니다";
                }


            }
            function stopOperation()
            {
                var endTime = new Date()
                endTime = endTime.getTime() + 5000;
                while(new Date().getTime() < endTime);
                document.getElementById("result").innerHTML = "일어날 시간 입니다.";

            }
            function awake()
            {
                alert("애기야 일어나자~");
            }
            
        </script>

        <button onclick="Available()">웹 워커 지원 여부</button><p>
        <button onclick = "stopOperation()">워커 미적용 수행</button>
        <button onclick = "awake()">깨어날 시간</button><p>
        <div id = "result"></div>       
    </body>
</html>
```

### 출력결과
- 워커 미적용 수행 버튼을 누르면 5초동안, 깨어날 시간 버튼 클릭이 안된다.

![image](https://user-images.githubusercontent.com/82345970/167335143-2869eff7-4fac-4f17-ab56-363c83fbd8ae.png)


### 웹 워커 미적용 코드 개선  
- **스레드 이용**
- worker.js 새파일 작성
