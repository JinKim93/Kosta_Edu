# 싱글톤(Singleton) 패턴

- 특정 클래스의 **인스턴스(객체)를 1개**만 생성하도록 제한하고 -> (new연산자 한번만 쓴다) 이를 공유하는 방법
- 생성자를 private로 하고, 자기 자신을 받는 함수를 만들어서 자기 자신의 객체를 반환 하는 클래스

# 싱글톤 패턴의 필요성
- 프로그램 내에 특정 클래스 내에서 **하나의 객체**만 생성하고자 할 때 사용
- 환경 설정 객체와 같이 공통으로 사용해야 하는 모듈에서 사용
- C++에서는 **정적싱글톤,동적싱글톤**이 있다 -> 자바는 동적싱글톤만 있음 

### 정적 싱글톤 구조
- 생성자가 private인 이유는 외부에서 객체 생성을 막기 위함
- 어디서든 싱글톤 객체를 접근할 수 있게 하기 위해 static 함수를 정의

```c

//static 함수 SingletonClass 타입을 레퍼런스로 리턴함
//레퍼런스(&) 타입으로 리턴을 하면 -> 현재 객체의 메모리를 리턴값으로 공유함
//static SingletonClass& getInstance()함수 instance라는 객체 리턴하는 함수
//함수를 호출하게 되면 내부에 있는 static변수인 instance를 리턴 할수 있다.
class SingleonClass
{

private:
	static SingletonClass instance;// 자기자신 타입으로 instance변수로 갖고, 그것도 static이다
	Singletonclass() {} //생성자 private를 한 이유는 외부에서 객체 생성 못하게 할려고
	~Singletonclass() {} // 내부에서 생성된 객체만 쓰기 위해
public:
	static SingletonClass& getInstance()
	{
		return instance;
	}


};
SingletonClass SingletonClass::instance; // 객체 생성
```

```c
/*showMessage->멤버함수
멤버함수 존재 이유 -> 멤버변수데이터를 set,get 즉 호출을 하는 역할
멤버함수 호출을 할려면 객체를 통해 호출이 되야함
public:
	SingletonClass() {}
	~SingletonClass() {}
	public으로 하면 외부에서 객체 생성 할수 있게 해줌
		일반적으로 객체 생성할려면 void main() 함수에서
		SingletonClass single; 선언을 하면 생성자가 자동으로 호출
		single.ShowMessage(); 이런식으로 호출하는게 일반적이다
*/
#include <iostream>
using namespace std;

class SingletonClass
{
private:
	static SingletonClass instance;
	SingletonClass(){}
	~SingletonClass() {}
public:
	static SingletonClass& getInstance() //private으로 생성된 static SingletonClass instance
	{
		return instance;
	}
	void ShowMessage()
	{
		cout << "Singleton Pattern" << endl;
	}
};
SingletonClass SingletonClass::instance;

void main()
{
	SingletonClass::getInstance().ShowMessage();
	//showMessage함수는 객체를 통해서 호출을 해야함
	// getInstance()가 내부에서 return instance를 하고 있다 
	//SingletonClass::getInstance() 이부분이 instance이다
	//여기서 특징은 더이상의 객체를 호출 할수 없다 -> 하나의 객체만 씀
	//프로그램이 종료 될때 까지 하나의 객체만 쓴다 -> 싱글톤패턴
}
```
